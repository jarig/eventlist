{% extends 'party/party.html' %}
{% load i18n %}
{% load static %}
{% get_static_prefix as STATIC_PREFIX %}
{% load field_renderer %}

{% block includes %}
    {{ block.super }}
    <link href="{{ STATIC_URL }}address/css/address.less" rel="stylesheet/less" type="text/css">
    <link href="{{ STATIC_URL }}common/css/forms.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="{{ STATIC_URL }}address/address.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/party.js"></script>
    {% include "jquery.multiselect.html" %}
    {% include "jquery.timeentry.html" %}
{% endblock %}

{% block scripts %}
    {{ block.super }}
    <script type="text/javascript">
        Party.init();
    </script>
{% endblock %}

{% block content %}

    <div class="container-fluid">
        <form action="{%  url party.views.credit %}" method="POST">
            <div class="row-fluid">
                <div class="buttonPane">
                    <a href="#" class="btn">{% trans "Submit" %}</a>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span3">
                    <div class='divButton'>
                        <div onclick="return CommonGUI.openUploadWindow('#uploadDialog','#id_logo','#id_logo');">
                            {% if createPartyForm.logo.value %}
                                {{ createPartyForm.logo }}
                            {% endif %}
                            {% if not party.logo and not createPartyForm.logo.value %}
                                <img id="partyLogoSrc" src="{{ STATIC_URL }}common/images/logoStub.png">
                            {% endif %}
                        </div>
                    </div>
                    <div class='logoUploadLabel'>
                        <a href="#" onclick="return CommonGUI.openUploadWindow('#uploadDialog','#id_logo','#id_logo');">Upload</a>
                    </div>
                </div>
                <div class="span9">
                    <div class="formControl {% if createPartyForm.name.errors %}errorHighlight{% endif %}">
                        {% field createPartyForm.name 'title=Party Name' 'class=wideinput' %}
                    </div>
                    <div class="errors">
                        {{ createPartyForm.name.errors }}
                    </div>
                </div>
                <div class="span9">
                    <div class="formControl">
                        {% field createPartyForm.description 'title=Party Description' 'class=widetext_area' %}
                        <div class="errors">
                            {{ createPartyForm.description.errors }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span9">
                    {% for form in eventSchedulesFormSet %}
                        {{ form.as_p }}
                    {% endfor %}
                </div>
                {{ eventSchedulesFormSet.management_form }}
            </div>
            <div class="row-fluid">
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">{% trans "Create Party" %}</button>
                    <button class="btn">{% trans "Cancel" %}</button>
                </div>
            </div>
        </form>
    </div>

    <div style="display: none">
        <div id="uploadDialog">
            <iframe src="{% url common.views.uploadTempImage %}" id="uploadLogoFrame" width="100%" height="100%">
            </iframe>
        </div>
    </div>
{% endblock %}